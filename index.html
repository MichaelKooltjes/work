<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Progress Tracker</title>
    <style>
        body { font-family: 'Arial', sans-serif; padding: 20px; text-align: center; background-color: #f0f0f0; color: #333; }
        h1 { color: #4CAF50; }
        .form-container, .progress-container { margin: 20px auto; width: 80%; max-width: 500px; }
        .form-container { background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        .progress-container { height: 30px; background-color: #f3f3f3; border-radius: 25px; position: relative; }
        .bar { position: absolute; top: 0; left: 0; height: 100%; transition: width 0.5s ease; }
        .progress-bar { background-color: #4CAF50; z-index: 1; }
        .meal-bar { background-color: #800080; z-index: 2; } /* Purple for meal compensation */
        label, .output p { font-weight: bold; }
        input { width: 100%; margin: 10px 0; padding: 5px; border: 1px solid #ddd; border-radius: 4px; }
        .output p { margin-top: 10px; }
        #totalEarningsDisplay { color: #4CAF50; }
        #mealCompensationDisplay { color: #800080; } /* Purple text for meal compensation */
        #moneyMadeDisplay { color: #4CAF50; }
        #breakTimeDisplay { color: #F0AD4E; } /* Orange text for break time */
        .slider-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .slider-values {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Work Progress Tracker</h1>
    <div class="form-container">
        <label for="income">Income per hour (in €):</label><input type="number" id="income" required>

        <label>Work time (start and end):</label>
        <div class="slider-container">
            <input type="range" id="startTimeSlider" min="9" max="20" value="9" oninput="syncSliders()" step="1">
            <input type="range" id="endTimeSlider" min="9" max="20" value="17" oninput="syncSliders()" step="1">
        </div>
        <div class="slider-values">
            <span>Start time: <span id="startTime">09:00</span></span>
            <span>End time: <span id="endTime">17:00</span></span>
        </div>

        <div class="output">
            <p id="totalEarningsDisplay">Total earnings: €<span id="totalEarnings">0</span></p>
            <p id="breakTimeDisplay">Break time: <span id="breakTime">0 minutes</span></p> <!-- Orange text for break time -->
            <p id="mealCompensationDisplay">Meal compensation: €<span id="mealCompensation">0.00</span></p> <!-- Purple text for meal compensation -->
        </div>
    </div>
    <div class="progress-container">
        <div class="bar meal-bar" id="mealCompensationBar"></div>
        <div class="bar progress-bar" id="progressBar"></div>
    </div>
    <div class="output">
        <p id="moneyMadeDisplay">Money made: €<span id="moneyMade">0</span></p>
    </div>

    <script>
        const byId = (id) => document.getElementById(id);

        function padTime(val) { return val.padStart(2, '0') + ':00'; }

        function syncSliders() {
            let startTimeValue = +byId('startTimeSlider').value;
            let endTimeValue = +byId('endTimeSlider').value;
            if (startTimeValue >= endTimeValue) {
                endTimeValue = startTimeValue + 1;
                byId('endTimeSlider').value = endTimeValue;
            }
            byId('startTime').textContent = padTime(startTimeValue.toString());
            byId('endTime').textContent = padTime(endTimeValue.toString());
            startProgress();
        }

        function startProgress() {
            const income = parseFloat(byId('income').value), startTime = +byId('startTimeSlider').value, endTime = +byId('endTimeSlider').value;
            if (endTime <= startTime || isNaN(income)) return updateProgress(0, 0, 0, 0);

            let totalWorkTime = endTime - startTime, breakTime = totalWorkTime >= 5.5 ? 0.5 : 0.25, mealComp = breakTime === 0.5 && endTime === 20 ? 7.50 : 0;
            let totalIncome = (totalWorkTime - breakTime) * income + mealComp;

            updateProgress(totalIncome, totalWorkTime, breakTime, mealComp, income);
        }

        function updateProgress(totalIncome, totalWorkTime, breakTime, mealComp, income) {
            const now = new Date();
            const currentHour = now.getHours() + now.getMinutes() / 60;
            const startTime = +byId('startTimeSlider').value;
            const elapsedWorkTime = Math.max(currentHour - startTime, 0);
            const moneyMade = Math.min(elapsedWorkTime * income + mealComp, totalIncome);

            const mealCompPercent = mealComp > 0 ? (mealComp / totalIncome) * 100 : 0;
            const workPercent = (elapsedWorkTime / totalWorkTime) * 100;

            byId('mealCompensationBar').style.width = mealCompPercent + '%';
            byId('progressBar').style.width = workPercent + '%';

            byId('totalEarnings').textContent = totalIncome.toFixed(2);
            byId('mealCompensation').textContent = mealComp.toFixed(2);
            byId('breakTime').textContent = (breakTime * 60) + ' minutes';
            byId('moneyMade').textContent = moneyMade.toFixed(2);
        }
    </script>
</body>
</html>
